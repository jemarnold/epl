<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reading and Cleaning Data • epl</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="reading-and-cleaning-data_files/libs/quarto-html/popper.min.js"></script><script src="reading-and-cleaning-data_files/libs/quarto-html/tippy.umd.min.js"></script><link href="reading-and-cleaning-data_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="reading-and-cleaning-data_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reading and Cleaning Data">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@jem_arnold">
<meta name="twitter:site" content="@jem_arnold">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epl</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/reading-and-cleaning-data.html">Reading and Cleaning Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/jemarnold.bsky.social" aria-label="Bluesky"><span class="fa fa-brands fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/jem_arnold" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jemarnold/epl" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reading and Cleaning Data</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <p>Often the first common task we have to do is read our data from a file exported from one of our lab devices into R. This package has a few functions to make that task a bit easier.</p>
<p>In this vignette we will learn:</p>
<ul>
<li><p>To read files exported from <em>Parvo Medics TrueOne 2400</em> metabolic cart and <em>Tymewear Vital Pro</em> ventilation chest strap with <code><a href="../reference/read_parvo.html">read_parvo()</a></code> and <code><a href="../reference/read_tymewear.html">read_tymewear()</a></code>, respectively.</p></li>
<li><p>To detect and replace local outlier values in metabolic data with <code><a href="../reference/replace_outliers.html">replace_outliers()</a></code>.</p></li>
<li><p>Plotting functions for pretty data visualision with <code><a href="../reference/theme_epl.html">theme_epl()</a></code>, <code><a href="../reference/palette_epl.html">palette_epl()</a></code>, and other <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> helper functions.</p></li>
<li><p>To perform digital filtering of metabolic data <code>&lt;under development as of 0.2.0&gt;</code>.</p></li>
<li><p>To calculate peak values (e.g. V̇O<sub>2</sub>peak) <code>&lt;under development as of 0.2.0&gt;</code>.</p></li>
</ul>
<div>
<blockquote>
<p><strong>{epl} 0.2.0 internal release notes:</strong></p>
<p>More functions will be added to this vignette as they are included in <em>{epl}</em>.</p>
</blockquote>
</div>
<p>First we will set up our R environment by calling the package libraries we will use.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span> <span class="co">## for data wrangling</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co">## for data wrangling</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co">## for plotting</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jemarnold.github.io/epl/">epl</a></span><span class="op">)</span> <span class="co">## this package</span></span>
<span></span>
<span><span class="co">## set the script default {ggplot2} display theme (see below for details)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/get_theme.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="../reference/theme_epl.html">theme_epl</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<hr>
<section class="level2"><h2 id="specify-file-path">Specify file path<a class="anchor" aria-label="anchor" href="#specify-file-path"></a>
</h2>
<p>There are a few ways to point to our data file. If our data files and R script are in the same root folder (or Rstudio project folder), then we should be able to use an implicit file path, e.g.: <code>"./raw_data/my_file.csv"</code>.</p>
<p>If the data file is elsewhere, we will need to define the full path explicitly, e.g.:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="st">"my_folder"</span>, <span class="st">"raw_data"</span>, <span class="st">"my_file.csv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "~/my_folder/raw_data/my_file.csv"</span></span></code></pre></div>
</div>
<section class="level3"><h3 id="example_epl">
<code>example_epl()</code><a class="anchor" aria-label="anchor" href="#example_epl"></a>
</h3>
<p><em>{epl}</em> includes example data files which can be used to test the included functions:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## calling `example_epl()` will return a list of all included example files</span></span>
<span><span class="fu"><a href="../reference/example_epl.html">example_epl</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "parvo_binned.CSV"  "parvo_bxb.CSV"     "parvo_ramp.CSV"</span></span>
<span><span class="co">#&gt; [4] "tymewear_live.csv" "tymewear_post.csv"</span></span>
<span></span>
<span><span class="co">## partial matching will error if matches multiple</span></span>
<span><span class="fu"><a href="../reference/example_epl.html">example_epl</a></span><span class="op">(</span><span class="st">"parvo"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `example_epl()`:</span></span>
<span><span class="co">#&gt; ! Multiple files match "parvo":</span></span>
<span><span class="co">#&gt; ℹ Matching files: "parvo_binned.CSV", "parvo_bxb.CSV", and "parvo_ramp.CSV"</span></span>
<span></span>
<span><span class="co">## calling a specific file by name will return the file path</span></span>
<span><span class="co">## partial string matching works for uniquely identifiable file names</span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/example_epl.html">example_epl</a></span><span class="op">(</span><span class="st">"parvo_binned"</span><span class="op">)</span></span>
<span><span class="va">file_path</span></span>
<span><span class="co">#&gt; [1] "C:/Program Files/R/R-4.5.1/library/epl/extdata/parvo_binned.csv"</span></span></code></pre></div>
</div>
<hr></section></section><section class="level2"><h2 id="reading-file-data">Reading file data<a class="anchor" aria-label="anchor" href="#reading-file-data"></a>
</h2>
<section class="level3"><h3 id="read_parvo">
<code>read_parvo()</code><a class="anchor" aria-label="anchor" href="#read_parvo"></a>
</h3>
<p>This function will read <em>.CSV</em> or <em>.xlsx</em> (but not <em>.XLS</em>) files exported by <em>Parvo Medics TrueOne 2400</em> metabolic cart.</p>
<div>
<blockquote>
<p><strong><code><a href="../reference/read_parvo.html">read_parvo()</a></code> won’t work on exported <em>.XSL</em> data</strong></p>
<p>The exported <em>.XSL</em> file format is obsolete and cannot be easily read into R. These files will need to be re-saved as <em>.xlsx</em> before being read. We recommend exporting as <em>.CSV</em> for this reason.</p>
</blockquote>
</div>
<p><code><a href="../reference/read_parvo.html">read_parvo()</a></code> has two simple arguments:</p>
<ul>
<li><p><code>file_path</code>: takes in the character string for our data file path, as we defined above.</p></li>
<li><p><code>add_timestamp</code>: gives the option to add a timestamp (time of day) column in <code>datetime</code> format based on the file recording start time. The file start time is accurate to the nearest second (± 0.5 sec precision) <strong>as long as the Parvo system time was accurate in the first place</strong>. Which is not always true.</p></li>
</ul>
<p>The output of this function is a list of three data frames:</p>
<ul>
<li><p><code>parvo$data</code>: contains the recorded raw data samples for exported data channels (e.g. <code>c("VO2", "VCO2", "RR", "Vt")</code>) and calculated metabolic values (e.g. <code>c("O2kJ", "O2kcal", "Paer", "METS")</code>; see <code><a href="../reference/read_parvo.html">?read_parvo</a></code> for details on calculated values).</p></li>
<li><p><code>parvo$details</code>: contains the file details &amp; metadata, including <code>c("Date", "Name", "Sex", "Age")</code> (metric SI units only).</p></li>
<li><p><code>parvo$events</code>: contains any manually entered events with time in seconds and event descriptions.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parvo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_parvo.html">read_parvo</a></span><span class="op">(</span>file_path <span class="op">=</span> <span class="va">file_path</span>, add_timestamp <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">parvo</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; # A tibble: 179 × 26</span></span>
<span><span class="co">#&gt;     TIME timestamp              HR VO2kg   VO2  VCO2   RER    RR    Vt    VE</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  18.1 2025-10-23 10:50:23     0  5.69 0.404 0.419 1.04   13.3 1.11  12.1 </span></span>
<span><span class="co">#&gt;  2  31.5 2025-10-23 10:50:36     0  6.80 0.483 0.484 1.00   17.8 0.993 14.5 </span></span>
<span><span class="co">#&gt;  3  49.5 2025-10-23 10:50:54   107  6.08 0.432 0.448 1.04   10.0 1.66  13.6 </span></span>
<span><span class="co">#&gt;  4  62.5 2025-10-23 10:51:07   107  4.06 0.288 0.321 1.11   13.8 0.816  9.27</span></span>
<span><span class="co">#&gt;  5  77.5 2025-10-23 10:51:22   107  8.61 0.611 0.648 1.06   16.0 1.28  16.8 </span></span>
<span><span class="co">#&gt;  6  94.9 2025-10-23 10:51:39   107  7.52 0.534 0.528 0.990  13.8 1.15  13.0 </span></span>
<span><span class="co">#&gt;  7 107.  2025-10-23 10:51:51   107  6.80 0.483 0.514 1.06   15.0 1.10  13.6 </span></span>
<span><span class="co">#&gt;  8 123.  2025-10-23 10:52:08   107  5.94 0.422 0.454 1.08   11.2 1.33  12.2 </span></span>
<span><span class="co">#&gt;  9 138.  2025-10-23 10:52:23   107  2.47 0.175 0.186 1.06   16.0 0.392  5.13</span></span>
<span><span class="co">#&gt; 10 153.  2025-10-23 10:52:37   107  3.92 0.278 0.294 1.06   12.1 0.845  8.42</span></span>
<span><span class="co">#&gt; # ℹ 169 more rows</span></span>
<span><span class="co">#&gt; # ℹ 16 more variables: VEVO2 &lt;dbl&gt;, VEVCO2 &lt;dbl&gt;, FEO2 &lt;dbl&gt;, FECO2 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   FATmin &lt;dbl&gt;, CHOmin &lt;dbl&gt;, Breath &lt;dbl&gt;, FatOx &lt;dbl&gt;, CarbOx &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   O2kJ &lt;dbl&gt;, O2kcal &lt;dbl&gt;, O2work &lt;dbl&gt;, O2energy &lt;dbl&gt;, O2power &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   O2pulse &lt;dbl&gt;, METS &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 16</span></span>
<span><span class="co">#&gt;   Date             Name  Sex     Age Height Weight `Insp. temp` `Baro. pressure`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 2025-10-23 10:5… TW02  Male      0    176     71         23.6             755.</span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: `Insp. humidity` &lt;dbl&gt;, `STPD to BTPS` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `O2 Gain` &lt;dbl&gt;, `CO2 Gain` &lt;dbl&gt;, `Base O2` &lt;dbl&gt;, `Base CO2` &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   `Measured O2` &lt;dbl&gt;, `Measured CO2` &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $events</span></span>
<span><span class="co">#&gt; # A tibble: 23 × 2</span></span>
<span><span class="co">#&gt;     TIME Events        </span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;         </span></span>
<span><span class="co">#&gt;  1   240 Start Exercise</span></span>
<span><span class="co">#&gt;  2   240 UP1 265W      </span></span>
<span><span class="co">#&gt;  3   540 Stop Exercise </span></span>
<span><span class="co">#&gt;  4   540 Cadence 95    </span></span>
<span><span class="co">#&gt;  5   900 Start Exercise</span></span>
<span><span class="co">#&gt;  6   900 RP2 265W      </span></span>
<span><span class="co">#&gt;  7  1200 Stop Exercise </span></span>
<span><span class="co">#&gt;  8  1200 RPE 6-20 15   </span></span>
<span><span class="co">#&gt;  9  1200 Cadence 95    </span></span>
<span><span class="co">#&gt; 10  1440 Start Exercise</span></span>
<span><span class="co">#&gt; # ℹ 13 more rows</span></span></code></pre></div>
</div>
<hr></section><section class="level3"><h3 id="read_tymewear">
<code>read_tymewear()</code><a class="anchor" aria-label="anchor" href="#read_tymewear"></a>
</h3>
<p>This function will read <em>“Live Processed CSV”</em> or <em>“Post Processed CSV”</em> files exported from <em>Tymewear VitalPro</em> chest strap.</p>
<p><code><a href="../reference/read_tymewear.html">read_tymewear()</a></code> only has one argument:</p>
<ul>
<li>
<code>file_path</code>: as above, the character string for our file path.</li>
</ul>
<p>The output of this function is a list of two data frames:</p>
<ul>
<li><p><code>tyme$data</code>: contains the recorded raw data samples for breathing rate, tidal volume, and ventilation: <code>c("br", "vt", "ve")</code>, with time in seconds and timestamps in <code>datetime</code> format.</p></li>
<li><p><code>tyme$details</code>: contains the file details &amp; metadata, including <code>c("gender", "weight", "date", "app-start-time")</code>. It is in “long” format, whereas the parvo details are in “wide” format.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tymelive</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_tymewear.html">read_tymewear</a></span><span class="op">(</span><span class="fu"><a href="../reference/example_epl.html">example_epl</a></span><span class="op">(</span><span class="st">"tymewear_live"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tymelive</span></span>
<span><span class="co">#&gt; $data</span></span>
<span><span class="co">#&gt; # A tibble: 1,083 × 5</span></span>
<span><span class="co">#&gt;     time timestamp              br    vt    ve</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt; &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  0    2025-10-23 10:50:11  12.7  1.35    17</span></span>
<span><span class="co">#&gt;  2  4.14 2025-10-23 10:50:15  14.9  1.35    20</span></span>
<span><span class="co">#&gt;  3  7.95 2025-10-23 10:50:18  15    1.05    16</span></span>
<span><span class="co">#&gt;  4 13.0  2025-10-23 10:50:24  13.8  2.4     33</span></span>
<span><span class="co">#&gt;  5 17.2  2025-10-23 10:50:28  13.3  1.11    15</span></span>
<span><span class="co">#&gt;  6 21.2  2025-10-23 10:50:32  12.8  1.63    21</span></span>
<span><span class="co">#&gt;  7 25.7  2025-10-23 10:50:36  13    3.61    47</span></span>
<span><span class="co">#&gt;  8 33.9  2025-10-23 10:50:44  11.9  5.88    70</span></span>
<span><span class="co">#&gt;  9 39.3  2025-10-23 10:50:50   8    1.14     9</span></span>
<span><span class="co">#&gt; 10 44.7  2025-10-23 10:50:55  10    2.21    22</span></span>
<span><span class="co">#&gt; # ℹ 1,073 more rows</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt; # A tibble: 60 × 2</span></span>
<span><span class="co">#&gt;    parameter     value   </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;   </span></span>
<span><span class="co">#&gt;  1 Info Section  ""      </span></span>
<span><span class="co">#&gt;  2 type          "0"     </span></span>
<span><span class="co">#&gt;  3 stages        "[]"    </span></span>
<span><span class="co">#&gt;  4 gender        "Female"</span></span>
<span><span class="co">#&gt;  5 weight        "64.0"  </span></span>
<span><span class="co">#&gt;  6 weight_units  "SI"    </span></span>
<span><span class="co">#&gt;  7 activity-name "TW02"  </span></span>
<span><span class="co">#&gt;  8 f_v           "1.0"   </span></span>
<span><span class="co">#&gt;  9 activity-type "0"     </span></span>
<span><span class="co">#&gt; 10 sport         "2"     </span></span>
<span><span class="co">#&gt; # ℹ 50 more rows</span></span></code></pre></div>
</div>
<hr></section></section><section class="level2"><h2 id="clean-and-filter-data">Clean and filter data<a class="anchor" aria-label="anchor" href="#clean-and-filter-data"></a>
</h2>
<section class="level3"><h3 id="replace_outliers">
<code>replace_outliers()</code><a class="anchor" aria-label="anchor" href="#replace_outliers"></a>
</h3>
<p>This function can detect local outliers in vector data and replace them with either <code>NA</code> or the local median value.</p>
<ul>
<li><p><code>x</code>: takes in a numeric vector to search along for local outliers.</p></li>
<li><p><code>width</code>: defines the window around either side of the target observation <code>idx</code>. e.g., <code>width = 7</code> defines a window of <code>-7 &lt; idx &lt; 7</code> around the target observation.</p></li>
</ul>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p>Empirically, <code>width = 7</code> seems suitable for breath-by-breath ventilatory data, however this can be modified depending on the data and the target response signal.</p>
</blockquote>
</div>
<ul>
<li>
<code>method</code>: defines how local outliers will be replaced; either <em>“median”</em> with the local median value (the default), or <em>“NA”</em> to remove the outlier and leave as a missing <code>NA</code> value.</li>
</ul>
<p>See <code><a href="../reference/replace_outliers.html">?replace_outliers</a></code> for more information.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tyme_data</span> <span class="op">&lt;-</span> <span class="va">tymelive</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="co">## filter breathing rate vector data for local outliers</span></span>
<span><span class="va">vt_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/replace_outliers.html">replace_outliers</a></span><span class="op">(</span><span class="va">tyme_data</span><span class="op">$</span><span class="va">vt</span>, width <span class="op">=</span> <span class="fl">7</span>, method <span class="op">=</span> <span class="st">"median"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## plot raw signal and highlight outliers </span></span>
<span><span class="co">## (see below for details about plotting)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">tyme_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">vt</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Tidal Volume (L)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="st">"Time (mm:ss)"</span>,</span>
<span>        breaks <span class="op">=</span> <span class="fu"><a href="../reference/breaks_timespan.html">breaks_timespan</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        labels <span class="op">=</span> <span class="va">format_hmmss</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="../reference/scale_colour_epl.html">scale_colour_epl</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="st">"BR"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span></span>
<span>        data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="va">tyme_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">vt_filtered</span> <span class="op">!=</span> <span class="va">vt</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">vt</span>, colour <span class="op">=</span> <span class="st">"outliers"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="reading-and-cleaning-data_files/figure-html/unnamed-chunk-5-1.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## to replace outliers from all channels in a data frame</span></span>
<span><span class="co">## using {tidyverse} {dplyr} grammar</span></span>
<span><span class="va">tyme_clean</span> <span class="op">&lt;-</span> <span class="va">tyme_data</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">br</span>, <span class="va">vt</span>, <span class="va">ve</span><span class="op">)</span>, \<span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="fu"><a href="../reference/replace_outliers.html">replace_outliers</a></span><span class="op">(</span><span class="va">.x</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co">## check relative (%) effect of removing outliers on reduced signal SD</span></span>
<span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">tyme_clean</span><span class="op">$</span><span class="va">vt</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">tyme_data</span><span class="op">$</span><span class="va">vt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.08497033</span></span>
<span></span>
<span><span class="co">## and reduced sample noise</span></span>
<span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">tyme_clean</span><span class="op">$</span><span class="va">vt</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff</a></span><span class="op">(</span><span class="va">tyme_data</span><span class="op">$</span><span class="va">vt</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2466022</span></span></code></pre></div>
</div>
<hr></section><section class="level3"><h3 id="filter_data">
<code>filter_data()</code><a class="anchor" aria-label="anchor" href="#filter_data"></a>
</h3>
<p><code>&lt;under development as of 0.2.0&gt;</code></p>
<hr></section><section class="level3"><h3 id="find_peaks">
<code>find_peaks()</code><a class="anchor" aria-label="anchor" href="#find_peaks"></a>
</h3>
<p>This function is used to detect the peak average value across a certain time span, and return the means for all data columns from within the rows included in that time span. Most commonly, this will be used to find the e.g. 30-second V̇O<sub>2</sub>peak.</p>
<ul>
<li><p><code>data</code>: this function works on a data frame with at least an <code>x</code> and <code>y</code> column. It will take in a data frame, apply processing to all data channels specified, and return the processed data frame.</p></li>
<li><p><code>x</code>: the name of the <em>“time”</em> column.</p></li>
<li><p><code>y</code>: the name of the target value to detect peaks for, e.g. <em>“VO2”</em>.</p></li>
<li><p><code>span</code>: the timespan (in units of <code>x</code>; i.e., in seconds) in which to calculate rolling local means, to find the peak value of <code>y</code>.</p></li>
</ul>
<div>
<blockquote>
<p><strong>Note</strong></p>
<p><code>span = 30</code> sec is the default most common timespan for calculating V̇O<sub>2</sub>peak.</p>
</blockquote>
</div>
<ul>
<li>
<code>between</code>: can optionally specify a sub-range of <code>x</code> (time values) in which to look for a peak value.</li>
</ul>
<p>See <code><a href="../reference/find_peaks.html">?find_peaks</a></code> for details.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## read data from example ramp test</span></span>
<span><span class="va">ramp_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_parvo.html">read_parvo</a></span><span class="op">(</span><span class="fu"><a href="../reference/example_epl.html">example_epl</a></span><span class="op">(</span><span class="st">"parvo_ramp"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">data</span></span>
<span></span>
<span><span class="va">peak_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/find_peaks.html">find_peaks</a></span><span class="op">(</span></span>
<span>    <span class="va">ramp_data</span>, </span>
<span>    x <span class="op">=</span> <span class="st">"TIME"</span>, <span class="co">## assign `x` and `y` values</span></span>
<span>    y <span class="op">=</span> <span class="st">"VO2"</span>, </span>
<span>    span <span class="op">=</span> <span class="fl">30</span>, <span class="co">## find peak mean values within a 30-sec timespan</span></span>
<span>    between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1500</span>, <span class="fl">2000</span><span class="op">)</span> <span class="co">## restrict the range in which to look for peaks</span></span>
<span><span class="op">)</span></span>
<span><span class="va">peak_data</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 25</span></span>
<span><span class="co">#&gt;   samples  TIME    HR VO2kg   VO2  VCO2   RER    RR    Vt    VE VEVO2 VEVCO2</span></span>
<span><span class="co">#&gt;     &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1       1 1770.   222  49.9  3.65  4.18  1.14  46.7  2.88  110.  36.8   32.1</span></span>
<span><span class="co">#&gt; # ℹ 13 more variables: FEO2 &lt;dbl&gt;, FECO2 &lt;dbl&gt;, FATmin &lt;dbl&gt;, CHOmin &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   FatOx &lt;dbl&gt;, CarbOx &lt;dbl&gt;, O2kJ &lt;dbl&gt;, O2kcal &lt;dbl&gt;, O2work &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   O2energy &lt;dbl&gt;, O2power &lt;dbl&gt;, O2pulse &lt;dbl&gt;, METS &lt;dbl&gt;</span></span>
<span></span>
<span><span class="co">## retrieve VO2peak value in ml/kg/min</span></span>
<span><span class="va">VO2peak</span> <span class="op">&lt;-</span> <span class="va">peak_data</span><span class="op">$</span><span class="va">VO2kg</span></span>
<span><span class="va">VO2peak</span></span>
<span><span class="co">#&gt; [1] 49.94765</span></span></code></pre></div>
</div>
<hr></section></section><section class="level2"><h2 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h2>
<section class="level3"><h3 id="theme_epl">
<code>theme_epl()</code><a class="anchor" aria-label="anchor" href="#theme_epl"></a>
</h3>
<p>This package includes a clean plot template and colour palette for <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a>, the data visualisation engine of choice in R. We have already seen the basics of what it looks like.</p>
<p>The key function is <code><a href="../reference/theme_epl.html">theme_epl()</a></code>, which can be called at the top of a script with <code>theme_set(theme_epl())</code> (as we have done at the top of this page) to set our plot defaults. Or it can be called within an individual plot, as below.</p>
<p><code><a href="../reference/theme_epl.html">theme_epl()</a></code> has the following arguments, in addition to being able to take in <code><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme()</a></code> arguments for ggplot settings:</p>
<ul>
<li><p><code>base_size</code> is the numeric font size, defaults to <code>14</code>.</p></li>
<li><p><code>base_family</code> is the font used, defaults to Arial <em>“sans”</em>. Another nice alternative font to install for use is “Merriweather Sans”, available from <a href="https://fonts.google.com/specimen/Merriweather+Sans" class="external-link">Google fonts</a>.</p></li>
<li><p><code>border</code> specifies either a <em>“partial”</em> (the default) or <em>“full”</em> border around the plot panel.</p></li>
</ul>
<p>These settings are usually fine to leave as default. See <code><a href="../reference/theme_epl.html">?theme_epl</a></code> for details.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## explore what each setting does to the aesthetics of the plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ramp_data</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">TIME</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span> <span class="co">## use `expression` for special symbols</span></span>
<span>        <span class="va">Incremental</span><span class="op">~</span><span class="va">Ramp</span><span class="op">~</span><span class="va">and</span><span class="op">~</span><span class="fu">dot</span><span class="op">(</span><span class="va">V</span><span class="op">)</span><span class="op">*</span><span class="va">O</span><span class="op">[</span><span class="st">'2'</span><span class="op">]</span><span class="op">~</span><span class="va">Verification</span><span class="op">~</span><span class="va">Assessment</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co">## set plot x- &amp; y-axis limits</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span> <span class="co">## parameters for the x-axis</span></span>
<span>        name <span class="op">=</span> <span class="st">"Time (mm:ss)"</span>,</span>
<span>        breaks <span class="op">=</span> <span class="fu"><a href="../reference/breaks_timespan.html">breaks_timespan</a></span><span class="op">(</span><span class="op">)</span>, <span class="co">## pretty time x-axis formatting</span></span>
<span>        labels <span class="op">=</span> <span class="va">format_hmmss</span> <span class="co">## pretty time x-axis formatting (see below)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span> <span class="co">## parameters for the y-axis</span></span>
<span>        name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="fu">bold</span><span class="op">(</span> <span class="co">## use `expression` for special symbols</span></span>
<span>            <span class="fu">dot</span><span class="op">(</span><span class="va">V</span><span class="op">)</span><span class="op">*</span><span class="va">O</span><span class="op">[</span><span class="st">'2'</span><span class="op">]</span><span class="op">~</span><span class="op">~</span><span class="st">'|'</span><span class="op">~</span><span class="op">~</span><span class="fu">dot</span><span class="op">(</span><span class="va">V</span><span class="op">)</span><span class="op">*</span><span class="va">CO</span><span class="op">[</span><span class="st">'2'</span><span class="op">]</span><span class="op">~</span><span class="st">'('</span><span class="op">*</span><span class="va">L</span><span class="op">%.%</span><span class="va">min</span><span class="op">^</span><span class="st">'-1'</span><span class="op">*</span><span class="st">')'</span></span>
<span>        <span class="op">)</span><span class="op">)</span>,</span>
<span>        expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co">## adjust space above/below max/min</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_colour_manual</a></span><span class="op">(</span> <span class="co">## set the colour mapping</span></span>
<span>        name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>        aesthetics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"colour"</span>, <span class="st">"fill"</span><span class="op">)</span>, <span class="co">## for both colour &amp; fill</span></span>
<span>        <span class="co">## set custom colours (see below)</span></span>
<span>        values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="../reference/palette_epl.html">palette_epl</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VO2"</span>, <span class="st">"VCO2"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span></span>
<span>        colour <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            linewidth <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">1</span> <span class="co">## modify the legend keys</span></span>
<span>        <span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_area</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">VO2</span>, colour <span class="op">=</span> <span class="st">"VO2"</span>, fill <span class="op">=</span> <span class="st">"VO2"</span><span class="op">)</span>, </span>
<span>              alpha <span class="op">=</span> <span class="fl">0.1</span>, key_glyph <span class="op">=</span> <span class="st">"path"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">VCO2</span>, colour <span class="op">=</span> <span class="st">"VCO2"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">peak_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">TIME</span>, y <span class="op">=</span> <span class="va">VO2</span><span class="op">)</span>,</span>
<span>               size <span class="op">=</span> <span class="fl">4</span>, shape <span class="op">=</span> <span class="fl">21</span>, stroke <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="reading-and-cleaning-data_files/figure-html/unnamed-chunk-7-1.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<hr></section><section class="level3"><h3 id="palette_epl">
<code>palette_epl()</code><a class="anchor" aria-label="anchor" href="#palette_epl"></a>
</h3>
<p><code><a href="../reference/palette_epl.html">palette_epl()</a></code> includes some nice colours which can be called individually - e.g.: <code>scale_colour_manual(values = palette_epl()[1:2])</code> - or as a default palette built into <code><a href="../reference/scale_colour_epl.html">scale_colour_epl()</a></code> (used in the two plots above).</p>
<p>See <code><a href="../reference/scale_colour_epl.html">?scale_colour_epl</a></code> for more options.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## visualise the colour palette</span></span>
<span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/show_col.html" class="external-link">show_col</a></span><span class="op">(</span><span class="fu"><a href="../reference/palette_epl.html">palette_epl</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure><p><img src="reading-and-cleaning-data_files/figure-html/unnamed-chunk-8-1.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section class="level3"><h3 id="other-ggplot2-helper-functions">Other <code>{ggplot2}</code> helper functions<a class="anchor" aria-label="anchor" href="#other-ggplot2-helper-functions"></a>
</h3>
<p>Time values on the x-axis can be displayed in <em>“h:mm:ss”</em> units with <code><a href="../reference/format_hmmss.html">format_hmmss()</a></code>, and breaks set to pretty time-ish values (e.g. 60-second or 5-minute (300 sec) increments) with <code><a href="../reference/breaks_timespan.html">breaks_timespan()</a></code>, as used in the plots above. See their respective help documentation for more details.</p>
</section></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jem Arnold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
